<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 Setting up the Base Model | VEWiki</title>
<meta name="author" content="">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="3 Setting up the Base Model | VEWiki">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 Setting up the Base Model | VEWiki">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<meta name="description" content="3.1 Geography Deciding the study area and the analysis years are critical to the initial development of any model, let alone a strategic model. The initial decision is to determine the model...">
<meta property="og:description" content="3.1 Geography Deciding the study area and the analysis years are critical to the initial development of any model, let alone a strategic model. The initial decision is to determine the model...">
<meta name="twitter:description" content="3.1 Geography Deciding the study area and the analysis years are critical to the initial development of any model, let alone a strategic model. The initial decision is to determine the model...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">VEWiki</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="scenario-planning-overview.html"><span class="header-section-number">1</span> Scenario Planning Overview</a></li>
<li><a class="" href="conceptprimer.html"><span class="header-section-number">2</span> Concept Primer</a></li>
<li><a class="active" href="setting-up-the-base-model.html"><span class="header-section-number">3</span> Setting up the Base Model</a></li>
<li><a class="" href="reporting-and-implementing-results.html"><span class="header-section-number">4</span> Reporting and Implementing Results</a></li>
<li><a class="" href="support-and-additional-resources.html"><span class="header-section-number">5</span> Support and Additional Resources</a></li>
<li><a class="" href="dlcd-target-rule-models.html"><span class="header-section-number">6</span> DLCD Target Rule Models</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="setting-up-the-base-model" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Setting up the Base Model<a class="anchor" aria-label="anchor" href="#setting-up-the-base-model"><i class="fas fa-link"></i></a>
</h1>
<div id="geography" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Geography<a class="anchor" aria-label="anchor" href="#geography"><i class="fas fa-link"></i></a>
</h2>
<p>Deciding the study area and the analysis years are critical to the initial development of any model, let alone a strategic model. The initial decision is to determine the model geography, or study area. Users set the model geography to match reporting regions and desired policy sensitivity.</p>
<p>VisionEval models all use the same nested geographic units, which are designed to largely align with US Census tracts and MPO boundaries. VE-RSPM operates with a zonal geography, using zones or districts at the most granular level. Note that the VE-State geography is similar to VE-RSPM, albeit at different scales. Essentially, VE-State is the state version of VE-RSPM with the primary zone structure being typically a county.</p>
<p>The VisionEval geography is comprised of several levels, detailed below.</p>
<div class="inline-figure">
<img src="images/VE_Geography.jpg">{width:100%}</div>
<div id="region-1" class="section level3" number="3.1.1">
<h3>
<span class="header-section-number">3.1.1</span> Region<a class="anchor" aria-label="anchor" href="#region-1"><i class="fas fa-link"></i></a>
</h3>
<p>The region is the entire model study area, which varies by model. For example, for VE-State the region is the state. For VE-RSPM, the region can be as small as the MPO boundary or may add additional areas where the region might expand to accommodate growth by the future model year. Note that when choosing a region for VE-RSPM, the area should break along Census boundaries (typically a metropolitan classification). Large-scale characteristics that do not vary across the region are specified at the region level. Examples include fuel prices and the carbon intensities of fuels.</p>
</div>
<div id="azones-1" class="section level3" number="3.1.2">
<h3>
<span class="header-section-number">3.1.2</span> Azones<a class="anchor" aria-label="anchor" href="#azones-1"><i class="fas fa-link"></i></a>
</h3>
<p>Azones are large subdivisions of the region. In VE-State, counties are most typically used as the Azone level. Azones in VE-RSPM are optional and should be used to distinguish areas which may have different land use and transportation policies. For this reason, metropolitan boundaries are most commonly used as the Azone level in VE-RSPM. Note that in VE-RSPM, Azones should be relatively large, containing populations that are similar in size to those of counties or Census Public Use Microdata Areas (PUMA) (e.g., population greater than 50,000).
* Azones are used to represent population and economic characteristics that vary across the region such as demographic forecasts of persons by age group and average per capita income.
* Azones are the only level of geography that is required to represent actual geographic areas and may not be simulated.</p>
</div>
<div id="bzones-1" class="section level3" number="3.1.3">
<h3>
<span class="header-section-number">3.1.3</span> Bzones<a class="anchor" aria-label="anchor" href="#bzones-1"><i class="fas fa-link"></i></a>
</h3>
<p>Bzones are subdivisions of Azones and the smallest unit of geography in VisionEval. Bzones are used to represent neighborhood characteristics and policies that may be applied differently by neighborhood, such as population density. Bzones may correspond to actual geographic areas or may be simulated.</p>
<ul>
<li><p>In VE-RSPM, Bzones are ordinarily defined according to Census Tract boundaries (or Census Block Groups depending on data availability).</p></li>
<li><p>In VE-State and VE-RPAT, Bzones are simulated. Bzone simulation greatly reduces model data requirements while still enabling the modeling of land-use-related policies and the effects of land use on various aspects of travel behavior. In rural areas, Bzones can be used to distinguish small cities from unincorporated areas.</p></li>
</ul>
</div>
<div id="mareas" class="section level3" number="3.1.4">
<h3>
<span class="header-section-number">3.1.4</span> Mareas<a class="anchor" aria-label="anchor" href="#mareas"><i class="fas fa-link"></i></a>
</h3>
<p>Mareas are collections of Azones associated with an urbanized area either because a portion of the urbanized area is located in the Azone or because a substantial proportion of the workers residing in the Azone work at jobs located in the urbanized area. Metropolitan models typically only have one assigned Marea whereas state models may have several. The model system requires that each Azone may be associated with only one Marea.</p>
<p>It is also required that all Azones be associated with an Marea. A special Marea named ‘None’ is used to apply to Azones that are not associated with any urbanized area. Mareas are used to specify and model urbanized area transportation characteristics such as overall transportation supply (transit, highways) and congestion. They are also used to specify large scale land-use-related characteristics and policies in models that use Bzone synthesis. Mareas are typically equivalent to a Census Urbanized Area.</p>
<p>Geographical relationships for a model are described in the “geography.csv” file contained in the “defs” directory. This file tabulates the names of each geographic unit (except for Region) and the relationships between them. Each row shows a unique relationship. Where a unit of geography is not explicitly defined (i.e., it will be simulated), “NA” values are placed in the table. It should be noted that there are no naming conventions for individual zones. The user is free to choose what conventions they will use.</p>
</div>
</div>
<div id="model-analysis-years" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Model Analysis Years<a class="anchor" aria-label="anchor" href="#model-analysis-years"><i class="fas fa-link"></i></a>
</h2>
<p>Overview text</p>
<div id="model-years" class="section level3" number="3.2.1">
<h3>
<span class="header-section-number">3.2.1</span> Model Years<a class="anchor" aria-label="anchor" href="#model-years"><i class="fas fa-link"></i></a>
</h3>
<p>VisionEval models can be used to output any number of years between the
model base year and future year. Each model year takes time to run so
typically only the following two or three years are assigned:</p>
<ul>
<li><p>Base year – starting year of the model, basis for data collection,
calibration, and other runs</p></li>
<li><p>Reference year – a year further in the future than the base year with
data available to validate the model</p></li>
<li><p>Future year – ending year of the model, longer time frames enable
consideration of more visionary changes</p></li>
</ul>
<p>As an example, the following years were modeled in the RSPM for
strategic assessments in Oregon:</p>
<ul>
<li><p>2005 – back-cast to match the MPO GHG reduction target base year.</p></li>
<li><p>2010 - Base Year – basis for data collection, calibration, and other
runs.</p></li>
<li><p>2035 – the date associated with MPO GHG reduction targets and is near
the RTP forecast date.</p></li>
<li><p>2050 – the date associated with statutory GHG reduction goals in the
STS. The longer time frame enables consideration of more visionary
changes that will take longer than the RTP time frame to occur</p></li>
</ul>
</div>
</div>
<div id="inputs" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Inputs<a class="anchor" aria-label="anchor" href="#inputs"><i class="fas fa-link"></i></a>
</h2>
<p>VE-RSPM inputs can be grouped into two categories, reflecting the
timeline when the data is required:</p>
<ul>
<li>Land Use Inputs</li>
<li>Transportation Inputs</li>
</ul>
<p>.. _header-n6:</p>
<div id="land-use-inputs" class="section level3" number="3.3.1">
<h3>
<span class="header-section-number">3.3.1</span> Land Use Inputs<a class="anchor" aria-label="anchor" href="#land-use-inputs"><i class="fas fa-link"></i></a>
</h3>
<p>These include data based on the geography and the base and future year
demographics and community design data used to establish the basic
households, their location and attributes, otherwise known as the
socio-economic data (SED). This data is needed early in the process to
set-up the model framework.</p>
<p>Other assumptions and transportation inputs for the base and future year
reflecting existing conditions and adopted local plans respectively.
These inputs require a mix of data and decisions by the metropolitan
area.</p>
<p>Some inputs must be provided and customized for the local area. In other
cases, inputs are noted as “default”, indicating that default values are
available from ODOT’s work with the OSTI, although local adjustment in
special cases is an option.</p>
<p>In introducing each group of inputs, a table is provided listing the
specific VE-RSPM filenames with a short description of their contents,
as well as the “geography” or spatial level of detail. Also listed is
whether or not ODOT default data is available for input as well as data
sources for those inputs that MPOs will need to develop. The table also
notes default inputs where local data could override default values.
This information provides MPO and local government staff and decision
makers with information to estimate the local/regional level of effort
required for setting up a local VE-RSPM model.</p>
<p>A detailed spreadsheet with the Oregon specific list of input files is
also provided: <a href="https://github.com/ORScenPlg/VETechWiki/raw/main/resources/VE-RSPM_File_Summary_20190708.xlsx">VE File
Summary</a></p>
<p>.. _header-n12:</p>
<p>see
<a href="https://github.com/VisionEval/VisionEval-Dev/blob/readme-dev/docs/tutorials/verspm/Inputs_and_Parameters.md#input-files" class="uri">https://github.com/VisionEval/VisionEval-Dev/blob/readme-dev/docs/tutorials/verspm/Inputs_and_Parameters.md#input-files</a></p>
<div id="rspm-demographic-and-land-use-inputs" class="section level4" number="3.3.1.1">
<h4>
<span class="header-section-number">3.3.1.1</span> RSPM DEMOGRAPHIC AND LAND USE INPUTS<a class="anchor" aria-label="anchor" href="#rspm-demographic-and-land-use-inputs"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table style="width:99%;" class="table table-sm">
<colgroup>
<col width="33%">
<col width="26%">
<col width="39%">
</colgroup>
<thead><tr class="header">
<th>Demographics</th>
<th>File</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Population by age
(HH &amp; non-institutional Group Quarters)</td>
<td>azone_hh_pop_by_age.csv</td>
<td>Number of Household persons within 6 age groups
by year by Azone</td>
</tr>
<tr class="even">
<td></td>
<td>azone_gq_pop_by_age.csv</td>
<td>Number of Non-Institutional Group Quarters
persons by 6 age groups by year by Azone</td>
</tr>
<tr class="odd">
<td>Average Household size,
%1-person households</td>
<td>azone_hhsize_targets.csv</td>
<td>Average household size &amp; share of 1-person
households by year by Azone</td>
</tr>
<tr class="even">
<td>Licensure drivers rate (optional)</td>
<td>region_hh_driver_adjust_prop.csv</td>
<td>Licensed share of driving age persons in 5 age
groups relative to model estimation year
(2001 NHTS) by year</td>
</tr>
<tr class="odd">
<td>Average Per Capita Income</td>
<td>azone_per_cap_inc.csv</td>
<td>Annual Per Capita
Income by type (HH, GQ) by Year by Azone</td>
</tr>
<tr class="even">
<td>Employed share of HH workers</td>
<td>azone_relative_employment.csv</td>
<td>(optional) Employed share of Household workers
in 5 age groups relative to model estimation year
(2001 NHTS) by year by Azone</td>
</tr>
</tbody>
</table></div>
</div>
<div id="land-use-inputs-1" class="section level4" number="3.3.1.2">
<h4>
<span class="header-section-number">3.3.1.2</span> Land Use Inputs<a class="anchor" aria-label="anchor" href="#land-use-inputs-1"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table style="width:100%;" class="table table-sm">
<colgroup>
<col width="27%">
<col width="15%">
<col width="56%">
</colgroup>
<thead><tr class="header">
<th>Employment by type (Total, Retail, Service)</th>
<th>bzone_employment.csv</th>
<th>Number of Total, Retail, and Service employment by year by Bzone</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Dwelling Units by type (SF, MF);</td>
<td>bzone_dwelling_units.csv</td>
<td>Number of Dwelling Units by type (SF, MF, GQ) by Year by Bzone</td>
</tr>
<tr class="even">
<td>Income Quartiles (for allocating households to DUs)</td>
<td>bzone_hh_inc_qrtl_prop.csv</td>
<td>Share of Dwelling Units (HHs) in Per Capita Income quartiles by year by BZone</td>
</tr>
<tr class="odd">
<td>Share of households in Urban Mixed Use areas (optional)</td>
<td>bzone_urban-mixed-use_prop.csv</td>
<td>Share of HHs in Urban Mixed Use Neighborhoods by Year and Bzone</td>
</tr>
<tr class="even">
<td>Built Form Ds (Design &amp; Transit)</td>
<td>bzone_network_design.csv</td>
<td>Design D (D3bpo4, pedestrian-oriented network measure as defined by EPA Smart Location Database) by year by Bzone</td>
</tr>
<tr class="odd">
<td></td>
<td>bzone_unprotected_area.csv</td>
<td>Land Area (water and large protected lands removed) by location type (Urban, Town, Rural) by year by Bzone</td>
</tr>
<tr class="even">
<td>Acres, Centroid Lat-Lon</td>
<td>bzone_lat_lon.csv</td>
<td>Bzone Centroid Latitute/Longitude by year by Bzone</td>
</tr>
</tbody>
</table></div>
<p>azone_per_cap_inc.csv</p>
<p>Used in the PredictIncome step of the VESimHouseholds module.
This file contains information on regional average per capita household (HHIncomePC) and group quarters (GQIncomePC) income by forecast year in year 2010 dollars. The data can be obtained from the U.S. Department of Commerce Bureau of Economic Analysis for the current year or from regional or state sources for forecast years. In order to use current year dollars just replace 2010 in column labels with current year. For example, if the data is obtained in year 2015 dollars then the column labels in the file shown below will become HHIncomePC.2015 and GQIncomePC.2015.</p>
<p>AZONE_PER_CAP_INC.CSV Layout</p>
<div class="inline-table"><table style="width:88%;" class="table table-sm">
<colgroup>
<col width="15%">
<col width="13%">
<col width="29%">
<col width="29%">
</colgroup>
<thead><tr class="header">
<th>Geo</th>
<th>Year</th>
<th>HHIncomePC.2010</th>
<th>GQIncomePC.2010</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>RVMPO</td>
<td>2010</td>
<td>32164</td>
<td>7500</td>
</tr>
<tr class="even">
<td>RVMPO</td>
<td>2038</td>
<td>43334</td>
<td>10000</td>
</tr>
</tbody>
</table></div>
<p>OREGON Income Index
+++++++++++++++++++++
The Oregon VE-State model assumed per capita income by county. For Oregon MPO RSPM models, locals estimate base year per capita income by MPO using census data. Forecast percent improvement is the same regardless of starting value.</p>
<p>Below table is the statewide income growth index to convert the input
values for “azone <em>per</em> cap_inc.csv”, based on their base year
calculated values.</p>
<div class="inline-table"><table style="width:68%;" class="table table-sm">
<colgroup>
<col width="31%">
<col width="36%">
</colgroup>
<thead><tr class="header">
<th colspan="2">Index relative to 2010 for use in VE-RSPM</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>2010</td>
<td>1</td>
</tr>
<tr class="even">
<td>2015</td>
<td>1.057915</td>
</tr>
<tr class="odd">
<td>2020</td>
<td>1.107752</td>
</tr>
<tr class="even">
<td>2025</td>
<td>1.159942</td>
</tr>
<tr class="odd">
<td>2030</td>
<td>1.214563</td>
</tr>
<tr class="even">
<td>2035</td>
<td>1.271811</td>
</tr>
<tr class="odd">
<td>2040</td>
<td>1.331726</td>
</tr>
<tr class="even">
<td>2045</td>
<td>1.394463</td>
</tr>
<tr class="odd">
<td>2050</td>
<td>1.460142</td>
</tr>
</tbody>
</table></div>
<p>Oregon Specific information:
These updated values should be used in the MPO Reference scenario.
- Manual changes to replace 2010 Transit &amp; Design Ds from EPA SLD.
- Unprotected acres from Place Type input file (PlaceType_Acreage.xlsx).
- Income growth should be calculated to match statewide assumptions per Appendix A.</p>
<p>.. _header-n21:</p>
</div>
</div>
<div id="transportation-inputs" class="section level3" number="3.3.2">
<h3>
<span class="header-section-number">3.3.2</span> Transportation Inputs<a class="anchor" aria-label="anchor" href="#transportation-inputs"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-table"><table style="width:100%;" class="table table-sm">
<colgroup>
<col width="19%">
<col width="21%">
<col width="58%">
</colgroup>
<thead><tr class="header">
<th colspan="3">Actions</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Single occupancy vehicle (SOV) diversion</td>
<td>azone_prop_sov_dvmt_diverted.csv</td>
<td>Bike, Personal Electric Vehicle. Etc. diversion of Single Occupancy vehicle tours by year by Azone.[In VE-State, applies to “urban” and “town” but not “rural” loc types within the AZone]</td>
</tr>
<tr class="even">
<td>Car service characteristics</td>
<td>azone_carsvc_characteristics.csv</td>
<td>Car Service Rate ($/mile) by level (high, low, ave), average Car service vehicle age, and limits on shifting to car service (LtTruck, Auto) by Year by Azone</td>
</tr>
<tr class="odd">
<td>Car service availability</td>
<td>
<p>bzone_carsvc_availability.csv</p>
<p>(azone_carsvc_availability.csv)</p>
</td>
<td>Car Service Level of service (High, Low) by Year by Bzone for RSPM (Azone by Area Type for VE-State)</td>
</tr>
<tr class="even">
<td>Car service access times</td>
<td>azone_vehicle_access_times.csv</td>
<td>Minutes to call-up vehicles by type (owned, High/Low CarSvc) by year by Azone</td>
</tr>
<tr class="odd">
<td>ITS operations</td>
<td>marea_operations_deployment.csv</td>
<td>Deployment (0-1,1=100%VMT coverage) of operations programs on Fwy (Ramp metering, Incident Response) and Arterials (Signal Coordination, Access Mgmt) programs by year by Marea</td>
</tr>
<tr class="even">
<td>% VMT covered by Drivers in Eco-Drive programs</td>
<td>marea_speed_smooth_ecodrive.csv</td>
<td>Deployment (0-1,1=100%VMT coverage) of Speed Smoothing (Fwys, Arterials) and Eco-Driving (LDV, HD Trucks) programs by year by Marea</td>
</tr>
<tr class="odd">
<td>ITS speed smoothing (Freeway ATM, Art Signal optimization) (optional)</td>
<td>other_ops_effectiveness.csv</td>
<td>Delay reduction (0-1) anticipated with full deployment of user-defined other operations program by road type (Fwy, Art), congestion type (Reoccurring, non-reoccuring) by 5 congestion levels by year by Azone</td>
</tr>
<tr class="even">
<td>Parking restrictions</td>
<td>
<p>bzone_parking.csv</p>
<p>(marea_parking-avail_by_area_type.csv and marea_parking-cost_by_area_type.csv)</p>
</td>
<td>Parking restrictions:Free spaces per dwelling unit type (SF, MF, GQ), share of workers paying for parking and in cashout program, and average parking fee by Year by Bzone (Marea by Area Type for VE-State)</td>
</tr>
<tr class="odd">
<td>Road lane-miles</td>
<td>marea_lane_miles.csv</td>
<td>Freeway and arterial lane-miles by Year and metropolitan area</td>
</tr>
<tr class="even">
<td>Demand management</td>
<td>
<p>bzone_travel_demand_mgt.csv</p>
<p>(azone_travel_demand_mgt.csv and marea_travel_demand_mgt_by area_type.csv)</p>
</td>
<td>Share of participants in home Individualized Marketing programs (HHs) and work-based Transportation Demand Management programs (workers) by year by Bzone (Azone and Marea by Area Type for VE-State)</td>
</tr>
<tr class="odd">
<td rowspan="2">Transit service</td>
<td>marea_transit_service.csv</td>
<td>Annual Transit Service revenue-miles by service mode (demand responsive, bus, rail, etcl) by year, and Marea.</td>
</tr>
<tr class="even">
<td>
<p>bzone_transit_service.csv</p>
<p>(NA for VE-State)</p>
</td>
<td>Transit D (D4c, accessible hourly PM peak service frequency as defined by EPA Smart Location Database) by year and Bzone</td>
</tr>
<tr class="odd">
<td rowspan="3">Transit fuels and powertrains</td>
<td>marea_transit_fuel.csv</td>
<td>Option 1(mix) 1of2: Fuel mix (share of GGE) for Transit Vehicles (Van, Bus, Rail) for ICE/HEV(diesel, gas, CNG – no rail CNG) by stock year</td>
</tr>
<tr class="even">
<td>marea_transit_biofuel_mix.csv</td>
<td>Option 1(mix) 2of2: Biofuels share of Transit fuels (ethanol, biodiesel, RNG) by stock year and Marea</td>
</tr>
<tr class="odd">
<td>marea_transit_powertrain_prop.csv</td>
<td>Powertrain mix (share of ICE, HEV, EV DVMT) for Transit Veh (Van, Bus, Rail) by stock year and Marea</td>
</tr>
<tr class="even">
<td>Transit fuel carbon intensity</td>
<td>marea_transit_ave_fuel_carbon_intensity.csv</td>
<td>Option2(CI direct): Carbon Intensity of composite Transit Fuel (g/MJ) by stock year and marea</td>
</tr>
<tr class="odd">
<td>Pricing</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Congestion charges</td>
<td>marea_congestion_charges.csv</td>
<td>Congestion Charges ($/mile) by road type (Fwy, Arterial) by 5 congestion levels by year by Marea</td>
</tr>
<tr class="odd">
<td>Proportion of external costs paid</td>
<td>region_prop_externalities_paid.csv</td>
<td>Share of Social Externalities covered in household fees (carbon, other) by year modelwide</td>
</tr>
<tr class="even">
<td>Carbon pricing (social recovery cost) (optional)</td>
<td>region_co2e_costs.csv</td>
<td>Environmental and social cost of CO2e emissions per metric ton carbon by year modelwide.</td>
</tr>
<tr class="odd">
<td>PAYD insurance participation</td>
<td>azone_payd_insurance_prop.csv</td>
<td>Shareof HHs in Pay-as-you-Drive Auto Insurance programs by Year by Azone</td>
</tr>
<tr class="even">
<td>Vehicle related taxes</td>
<td>azone_hh_veh_own_taxes.csv</td>
<td>Annual auto ownership fees (fixed and sales tax rate) by Year by Azone</td>
</tr>
<tr class="odd">
<td>VMT tax or road usage charge</td>
<td>azone_veh_use_taxes.csv</td>
<td>Mileage Based Fee by type (fuel tax, VMT fee, Ev surcharge) by year by Azone</td>
</tr>
<tr class="even">
<td>Retail costs for fuel</td>
<td>azone_fuel_power_cost.csv</td>
<td>Vehicle energy costs for fuel (<span class="math inline">\(/gallon), electricity (\)</span>/kwhr) by year by Azone (exclusive of taxes)</td>
</tr>
<tr class="odd">
<td>Road costs</td>
<td>region_road_cost.csv</td>
<td>Infrastructure costs (BaseModernization, PreservationOpsMtncc, Other, Arteraial per LnMi, Fwy per LnMi) used to estimate LDV VMT fee to fully recover road costs.</td>
</tr>
<tr class="even">
<td>Vehicles and Fuels</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Charging infrastructure</td>
<td>azone_charging_availability.csv</td>
<td>Availability (0-1) of vehicle charging by dwelling typ (SF, MF, GQ) by stock year by azone</td>
</tr>
<tr class="even">
<td>Electricity carbon intensity</td>
<td>azone_electricity_carbon_intensity.csv</td>
<td>Carbon Intensity of Electricity (g/MJ) by stock year by azone</td>
</tr>
<tr class="odd">
<td>Car service powertrains</td>
<td>region_carsvc_powertrain_prop.csv</td>
<td>LDV-Carservice Vehicle (Auto/LightTruck) powertrain (Ice/Hev/Phev/Bev) shares by stock year by marea.</td>
</tr>
<tr class="even">
<td>Commercial service powertrains</td>
<td>region_comsvc_powertrain_prop.csv</td>
<td>LDV-ComSvc Vehicle (Auto/LightTruck) powertrain (Ice/Hev/Bev) shares by stock year by marea</td>
</tr>
<tr class="odd">
<td>Heavy truck powertrains</td>
<td>region_hvytrk_powertrain_prop.csv</td>
<td>HD Truck powertrain (ICE, HEV, EV) shares by stock year</td>
</tr>
<tr class="even">
<td>% of light trucks in household fleet</td>
<td>azone_hh_lttrk_prop.csv</td>
<td>Share of household LDV that are Light Trucksby year by Azone</td>
</tr>
<tr class="odd">
<td>% of light trucks in car service fleet</td>
<td>region_carsvc_lttrk_prop.csv</td>
<td>Share of CarSvc LDV that are Light Trucksby year by Azone</td>
</tr>
<tr class="even">
<td>% of light trucks in commercial service fleet</td>
<td>region_comsvc_lttrk_prop.csv</td>
<td>LDV-ComSvc share of vehicles that are Light Truck by stock year by Azone</td>
</tr>
<tr class="odd">
<td>Mean age of household vehicles</td>
<td>azone_hh_veh_mean_age.csv</td>
<td>Mean Age of household vehicles by type (auto, light truck) by year by Azone.
[NOTE: CarSvc age is in azone_carsvc_characteristics.csv]</td>
</tr>
<tr class="even">
<td>Mean age of commercial service vehicles</td>
<td>region_comsvc_veh_mean_age.csv</td>
<td>Mean Age of household vehicles by type (auto, light truck) by year by Azone</td>
</tr>
<tr class="odd">
<td>Avergae fuel carbon intensity</td>
<td>region_ave_fuel_carbon_intensity.csv</td>
<td>LDV (HH, CarSvc, ComSvc, Van) + HD (Truck, Bus, Rail) composite carbon Intensity of Fuel (g/MJ) by stock year by marea</td>
</tr>
<tr class="even">
<td>Base year set up</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Base year urban VMT</td>
<td>marea_base_year_dvmt.csv</td>
<td>Marea DVMT by type (LDV, HD Truck) overwrite of base year 2010 Hwy Statistics default (NA recommended for VE-RSPM) and urbanized area name</td>
</tr>
<tr class="even">
<td>Base year DVMT split by functional class</td>
<td>marea_dvmt_split_by_road_class.csv</td>
<td>Starting share of DVMT by type (LDV, HvyTrk, Bus) by road type (Fwy,Arterial, other), LDV share is adjusted by congestion model.</td>
</tr>
<tr class="odd">
<td>Base year VMT</td>
<td>region_base_year_dvmt.csv</td>
<td>Region Freight Vehicle DVMT growth rates-basis (ComSvc-Pop or Inc, HHdvmt; HvyTrk-Pop or Inc) and overwrite of base year 2010 Hwy Statistics default of region Heavy Truck DVMT (NA recommended for VE-RSPM) and state name.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="calibration-validation" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Calibration &amp; Validation<a class="anchor" aria-label="anchor" href="#calibration-validation"><i class="fas fa-link"></i></a>
</h2>
<div id="regional-validation-targets" class="section level3" number="3.4.1">
<h3>
<span class="header-section-number">3.4.1</span> Regional Validation Targets<a class="anchor" aria-label="anchor" href="#regional-validation-targets"><i class="fas fa-link"></i></a>
</h3>
<p>Local datasets can provide further validation targets to check VE model results. To better match these targets, relevant outputs should be checked against the target, and additional changes made as needed to inputs to improve alignment. Other key outputs of the model should be confirmed and/or checked for reasonableness, even if not specific regional target is available. The validation targets should be checked in the order listed, as changes to earlier items will affect outputs of items further down the list.</p>
<ul>
<li><p>Population &amp; Households: Confirm VE outputs match MPO total population inputs (bzone_household_pop_by_age.csv, bzone_group_quarters_pop_by_age.csv). Population by Location Types (Metropolitan, Town, Rural) should match official Oregon Population Resource Center forecasts (except for Portland Metro) for the Urban Growth Boundary (loctype=”metropolitan”) and overall County. VisionEval models create households from input population, with households assigned to certain districts based on the dwelling unit inputs. Inputs on dwelling units and household size can be adjusted (bzone_dwelling_units.csv, azone_hhsize_targets.csv).</p></li>
<li><p>Household Income: MPO Per Capita Income is an important driver of travel. Confirm outputs match inputs (azone_per_cap_inc.csv), developed as instructed using statewide income growth forecasts. Note that outputs are in baseyear dollars and may need to be converted to other year be make comparable (/defs/deflators.csv).</p></li>
<li><p>Density: Activity density is an important driver of travel. Outputs should be checked for reasonableness, and can be roughly compared to EPA’s 2010 <a href="https://www.epa.gov/smartgrowth/smart-location-mapping#SLD">Smart Location Database</a> block group data,“D1D” density variable. Adjustments can be made to inputs for population, dwelling units, workers, as well as unprotected acres. Note that UGBs often contain areas that can’t be developed such as water bodies and large parks. ODOT has guidance for removing these undevelopable areas with GIS methods, as part of its instructions for building Oregon Place Types from TAZ data.</p></li>
<li><p>Vehicle Miles Travelled (VMT): HPMS provides MPO-level vehicle miles traveled for historic years. Note HPMS definition of VMT differs from that of VE. VE reports on all household travel regardless of where it occurs, and adds Commercial vehicle and Heavy Duty Truck and Bus travel on MPO roads. HPMS reports vehicular travel of all modes on roads within the MPO boundary. The best comparison is at the statewide level.</p></li>
</ul>
<p>o See example from Albany MPO</p>
<ul>
<li><p>MPG: Overall fuel efficiency of light duty passenger and Commercial Service, as well as transit and heavy trucks are output by the model. The combined fuel efficiencies of registered passenger and commercial service can be obtained from DMV data and used to check for reasonableness in the base year.
* &gt; &gt; See example from Albany MPO</p></li>
<li><p>Statewide Fuel consumed: Fuel sales are rarely tracked at the sub-state level, but may be available if there is a local gas tax. Even if available, the purchase location is not an accurate indicator of where fuel was used. So use caution when comparing.</p></li>
<li>
<p>Total Emissions: The overall GHG emissions is an important output. Of particular interest may be its use in GHG reduction targets, such as:</p>
<pre><code> * &gt; &gt; Statewide mandate of 75% Total GHG reduction 1990-2050
 * &gt; &gt; MPO mandate of Percent Total LDV GHG reduction 2005-20XX, beyond vehicles and fuels per OAR 660.044 (see SPG Tech Appendix p.110+ for calculation method and ODOT provided example calculation XLS)
 * &gt; &gt; Note: GHG emission rates reported in the Oregon MPO GHG Target Rule (OAR 660.044 grams per mile by year), reflect emissions prior to DEQ re-baselining of fuel carbon intensity. As such, emission rates using the provided “TargetRule fileset” differ from those in more current Oregon scenarios.
 * &gt; &gt; Local jurisdictions may have their own climate mandates and definitions</code></pre>
</li>
<li><p>Sensitivity Testing: Sensitivity tests should be performed to evaluate the reasonableness (eg. correct direction and magnitude) of the VE-RSPM output estimates. More or less ambitious policy actions can be tested, and the change in various output metrics reviewed for reasonableness. These tests are a standard part of the Oregon MPO Strategic Assessment process, and running many scenarios is built into VisionEval.</p></li>
<li><p>Comparable communities: VE output results can be compared to prior VE scenario results in the same or other Oregon locations. Reports for all Oregon Strategic Assessment/Scenario Planning efforts can be found on this OSTI website. CAMPO &amp; RVMPO Strategic Assessment reports include Reference Case (typically early report table) and sensitivity test results (typically in appendices) that provide good comparable estimates</p></li>
</ul>
</div>
</div>
<div id="analyzing-visualizing-outputs" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> Analyzing &amp; Visualizing Outputs<a class="anchor" aria-label="anchor" href="#analyzing-visualizing-outputs"><i class="fas fa-link"></i></a>
</h2>
<p>Both RSPM and VE-RPAT have the built-in scenario viewers, which allows
for assessing a large numbers of future scenarios, each with a different
combination of prioritizations, policy decisions, and constraints. The
VEScenarios module provides the capability to quickly set up, run, and
visualize large numbers of VE-RPAT and RSPM scenarios using a baseline
scenario combined with multiple changes to model inputs. VE-State does
not yet compatible with the VEScenarios module but it is a goal of
future work on VisionEval project.</p>
<p>The scenario viewer will open automatically after a multi-scenario run
of RSPM or VE-RPAT is complete. The scenario viewer can also be opened
manually once the scenarios have been run, by opening the VE-RPAT.html
file in a web browser.</p>
<p>Each directory is essentially a copy of RSPM or VE-RPAT base model, with
inputs modified as specified in the scenario_inputs directory. Each
scenario directory contains the results of a model run with its own
inputs, datastore, and log file.</p>
<p>.. _header-n6:</p>
<div id="example---verpat-scenario-viewer" class="section level3" number="3.5.1">
<h3>
<span class="header-section-number">3.5.1</span> Example - VERPAT Scenario Viewer<a class="anchor" aria-label="anchor" href="#example---verpat-scenario-viewer"><i class="fas fa-link"></i></a>
</h3>
<p>.. figure:: <a href="https://github.com/ORScenPlg/VETechWiki/blob/main/media/VERPAT_ScenarioViewer.jpg" class="uri">https://github.com/ORScenPlg/VETechWiki/blob/main/media/VERPAT_ScenarioViewer.jpg</a>
:alt:</p>
<p>The Viewer is broken into three parts - the Inputs (vertical bar charts)
along the top row. The Outputs (vertical bar charts) just under the
inputs, and the scenario data table is at the very bottom.</p>
<p>.. _header-n9:</p>
</div>
<div id="inputs-1" class="section level3" number="3.5.2">
<h3>
<span class="header-section-number">3.5.2</span> Inputs<a class="anchor" aria-label="anchor" href="#inputs-1"><i class="fas fa-link"></i></a>
</h3>
<p>The top of the scenario viewer shows scenario input levels by
categories. Categories combine changes to multiple input files to help
simplify a large number of scenarios. Categories can be defined by the
user in the “category_config.json” file. [ screen shot of the folder
structure] The default categories are the following:</p>
<p><strong>Policy Factors:</strong> These categories represent factors within local and
state control.</p>
<ul>
<li><p>Community Design Policies that seek to enable shorter trips and
alternate modes such as promotion of mixed use land use, transit
service, bicycling, and parking management.</p></li>
<li><p>Marketing &amp; Incentives Policies that improve driving efficiency such
as ecodriving,and Intelligent Transportation System efforts, as well
as programs that reduce auto demand such as carsharing, and home or
work-based transportation demand management.</p></li>
<li><p>Pricing Policies that move towards true cost pricing such as road
user fees to pay for the cost of operating, maintaining and improving
roads, pay-as-you-drive (PAYD) insurance, and environmental impact
fees such as a carbon tax.</p></li>
<li><p>Vehicles &amp; Fuels Factors representing the anticipated changes to
future vehicles and fuels, in addition to those resulting from
existing federal and state laws, including market changes such as the
shift to electric vehicles or more fuel efficient vehicles, reduced
carbon intensity of fuels, pace of vehicle turnover, and the light
truck share of vehicles. Since these shifts would primarily result
from additional federal and state policies promoting market changes,
these scenarios assume supportive local actions that advocate for
more ambitious policies along with local efforts, such as installing
charging stations and using landfill captured gases (renewable
natural gas) to fuel buses.</p></li>
</ul>
<p><strong>Context Factors:</strong> These categories represent factors outside our
control, but help evaluate the robustness of policies in the face of
uncertain future conditions.</p>
<ul>
<li><p>Fuel Price The assumed market price of gasoline and other fuels
(exclusive of fuel taxes).</p></li>
<li><p>Income Growth The assumed growth of average per capita income,
representing the health of the economy.</p></li>
</ul>
<p>The default settings for the scenario viewer define several levels for
each of the categories. These levels are numbered to indicate the amount
of change from a reference case which represents the continuation of
adopted local plans, policies and trends.</p>
<ul>
<li><p>Level 1: Corresponds to the reference case.</p></li>
<li><p>Level 0: Is often used to represents a retreat from current plans
(such as lower parking fees or less bicycling than anticipated), or
lower context forecasts (i.e., lower fuel price or lower income).</p></li>
<li><p>Levels 2-3: Representing more ambitious policies or higher context
forecasts (i.e., higher fuel price or higher income).</p></li>
</ul>
<p>The levels are displayed in category bar charts, one for each Category.
Note that the scenario viewer is also interactive. The user can select
on or multiple of the scenario input levels to filter out their
corresponding scenarios and data.</p>
<p>.. _header-n36:</p>
<p>Outputs</p>
<p>Given the chosen category inputs, the web page also shows future year
outcomes for the several performance measures. Unlike the scenario level
inputs, these performance measures are hard-coded into the scenario
viewer and cannot be easily changed. The performance measures in the
scenario viewer are the following:</p>
<ul>
<li><p>GHG Target Reduction: 2005-2038 percentage reduction in light-duty
vehicle GHG emissions (beyond what is anticipated to occur due to
baseline assumptions regarding improvements to vehicles and fuels).
RVMPO has a 2005 - 2035 state-set GHG reduction target of 19%</p></li>
<li><p>DVMT Per Capita: daily vehicle miles of travel of residents divided
by population.</p></li>
<li><p>Bike Travel Per Capita: annual miles of resident bike travel (not
including recreational travel) divided by population.</p></li>
<li><p>Walk Travel Per Capita: annual residents’ walk trips (not including
recreation or walk to transit) divided by population.</p></li>
<li><p>Air Pollution Emissions: daily metric tons of pollutants emitted from
all light-duty vehicle travel (including hydrocarbons, carbon
monoxide, nitrogen dioxide, and particulates).</p></li>
<li><p>Annual Fuel Use: annual million gallons of gasoline and other fuels
consumed by all light-duty vehicle travel.</p></li>
<li><p>Annual Household Vehicle Cost: average annual household cost
(thousand dollars) for owning and operating light-duty vehicles
(including gas, taxes, parking, registration, depreciation,
maintenance, and financing).</p></li>
<li><p>Truck Delay: daily vehicle-hours of delay for heavy truck travel on
area roads.</p></li>
</ul>
<p>Each performance measure is illustrated in a bar chart showing the range
of outcome values for the selected scenarios. The bar height indicates
the number of selected scenarios with that outcome value.</p>
<p>The model output bar charts are also interactive, and the user can
select a range of values within one performance measure to see which
policy choices and land use inputs result in desired outcomes. Figure 10
2 shows how a selection of the low end of the GHG emissions updates how
many scenarios result in this outcome, as well as the respective
categories of those scenarios.</p>
<p>The scenario data table at the bottom (not shown) also updates to show
only the scenarios resulting in the selected outcome.</p>
<p>.. figure:: <a href="https://github.com/ORScenPlg/VETechWiki/blob/main/media/VERPAT_ScenarioViewer_selectoutput.jpg" class="uri">https://github.com/ORScenPlg/VETechWiki/blob/main/media/VERPAT_ScenarioViewer_selectoutput.jpg</a>
:alt:</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="conceptprimer.html"><span class="header-section-number">2</span> Concept Primer</a></div>
<div class="next"><a href="reporting-and-implementing-results.html"><span class="header-section-number">4</span> Reporting and Implementing Results</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#setting-up-the-base-model"><span class="header-section-number">3</span> Setting up the Base Model</a></li>
<li>
<a class="nav-link" href="#geography"><span class="header-section-number">3.1</span> Geography</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#region-1"><span class="header-section-number">3.1.1</span> Region</a></li>
<li><a class="nav-link" href="#azones-1"><span class="header-section-number">3.1.2</span> Azones</a></li>
<li><a class="nav-link" href="#bzones-1"><span class="header-section-number">3.1.3</span> Bzones</a></li>
<li><a class="nav-link" href="#mareas"><span class="header-section-number">3.1.4</span> Mareas</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#model-analysis-years"><span class="header-section-number">3.2</span> Model Analysis Years</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#model-years"><span class="header-section-number">3.2.1</span> Model Years</a></li></ul>
</li>
<li>
<a class="nav-link" href="#inputs"><span class="header-section-number">3.3</span> Inputs</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#land-use-inputs"><span class="header-section-number">3.3.1</span> Land Use Inputs</a></li>
<li><a class="nav-link" href="#transportation-inputs"><span class="header-section-number">3.3.2</span> Transportation Inputs</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#calibration-validation"><span class="header-section-number">3.4</span> Calibration &amp; Validation</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#regional-validation-targets"><span class="header-section-number">3.4.1</span> Regional Validation Targets</a></li></ul>
</li>
<li>
<a class="nav-link" href="#analyzing-visualizing-outputs"><span class="header-section-number">3.5</span> Analyzing &amp; Visualizing Outputs</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#example---verpat-scenario-viewer"><span class="header-section-number">3.5.1</span> Example - VERPAT Scenario Viewer</a></li>
<li><a class="nav-link" href="#inputs-1"><span class="header-section-number">3.5.2</span> Inputs</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>VEWiki</strong>" was written by . It was last built on 2023-01-26.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
